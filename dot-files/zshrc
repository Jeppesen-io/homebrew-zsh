# Disable MOTD/last login message
touch ~/.hushlogin

########## Setup profile directorires
# Simple fun() to create a directory then
# export the path a var
export_and_mkdir() {
  VAR=$1
  DIR=$2
  export $VAR=$DIR
  mkdir -p $DIR
}

# XDG really helps keep your directory structure clean!
# I use it for almost everything
#
#   https://wiki.archlinux.org/index.php/XDG_Base_Directory_support
#   https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html
export_and_mkdir  XDG_CONFIG_HOME "$HOME/.config"
export_and_mkdir  XDG_CACHE_HOME  "$HOME/.cache"
export_and_mkdir  XDG_DATA_HOME   "$HOME/.local"
export_and_mkdir  RBENV_ROOT      "$XDG_CACHE_HOME/rbenv"
export_and_mkdir  ADOTDIR         "$XDG_CACHE_HOME/antigen"

# Use zplug, installed from brew
export ZPLUG_HOME=/usr/local/opt/zplug
source $ZPLUG_HOME/init.zsh

# zsh plugins
zplug "lib/history", from:oh-my-zsh

# Theme
POWERLEVEL9K_MODE='awesome-patched'
zplug "bhilburn/powerlevel9k", use:powerlevel9k.zsh-theme
export POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(context dir vcs)
export POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status history time)

# Install plugins if there are plugins that have not been installed
if ! zplug check --verbose; then
    printf "Install? [y/N]: "
    if read -q; then
        zplug clear
        echo; zplug install
    fi
fi

# Tell zplug that you're done
zplug load >> /dev/null

########## rbenv
eval "$(rbenv init -)"
echo 2.3.1 > ~/.ruby-version

export CHEF_USER=nelson
export EDITOR=vim
export DEFAULT_USER=nelson

# Update stuff
alias update-brew='brew update -v && brew upgrade -v && brew cleanup && brew cask cleanup && brew prune'
alias update-osx='softwareupdate --install --all --verbose'

# misc
alias n='nvim ~/.local/notes.md'

# Bundle
alias be='bundle exec'

# Vagrant
alias vd='vagrant destroy -f'
alias vu='vagrant up'
alias vp='vagrant provision'
alias vs='vagrant ssh'
alias kb='be rake server:kickberks'

# Vagrant combos!
alias kbvu='kb && vd || true && vu '
alias kbvp='kb && vp'

if [ -e ~/src ] ; then
  if [ -e ~/src/chef ] ; then
    cd ~/src/chef
  else
    cd ~/src
  fi
fi
